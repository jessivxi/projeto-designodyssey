(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[611],{1409:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var s=a(5155),i=a(2115),t=a(5695),c=a(3940),l=a.n(c);function o(){let[e,r]=(0,i.useState)([]);(0,i.useEffect)(()=>{_()},[]);let a=(0,t.useRouter)(),[c,o]=(0,i.useState)({title:"",description:"",category:"",basePrice:"",packages:"",idFreelancer:""}),[n,u]=(0,i.useState)({title:"",description:"",category:"",basePrice:"",idFreelancer:""}),p={web:1,grafico:2,logotipo:3,"arte digital":4},d=e=>{let{name:r,value:a}=e.target;o(e=>({...e,[r]:a}))},b=()=>{let e={title:"",description:"",category:"",basePrice:"",idFreelancer:""};return c.title.trim()||(e.title="T\xedtulo obrigat\xf3rio"),c.description.trim()||(e.description="Descri\xe7\xe3o obrigat\xf3ria"),c.category||(e.category="Categoria obrigat\xf3ria"),(!c.basePrice||isNaN(Number(c.basePrice)))&&(e.basePrice="Pre\xe7o inv\xe1lido"),(!c.idFreelancer.trim()||isNaN(Number(c.idFreelancer)))&&(e.idFreelancer="ID do freelancer inv\xe1lido"),u(e),Object.values(e).every(e=>!e)},m=async e=>{if(e.preventDefault(),!b())return;let r={id_categoria:p[c.category],titulo:c.title,descricao:c.description,preco_base:Number(c.basePrice),pacotes:c.packages||"[]",id_freelancer:Number(c.idFreelancer)};try{let e=await fetch("http://localhost/dashboard/api-designOdyssey/servicos/post.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s=await e.json();if(!e.ok)throw Error(s.erro||"Erro ao publicar");alert("Servi\xe7o publicado com sucesso!"),a.push("/profile_freelancer")}catch(e){alert(e.message)}},_=async()=>{try{let e=await fetch("http://localhost/dashboard/api-designOdyssey/usuarios/get.php",{method:"GET"}),a=await e.json();if(!e.ok)throw Error(a.erro||"Erro ao obter usu\xe1rios");r(a)}catch(e){alert(e.message)}};return(0,s.jsxs)("form",{onSubmit:m,className:l().form,children:[(0,s.jsx)("span",{children:"Publique seu Servi\xe7o"}),(0,s.jsx)("h1",{children:"Publique suas ideias e servi\xe7os para que os clientes possam visualizar e contratar."}),(0,s.jsxs)("div",{className:l().formGroup,children:[(0,s.jsx)("label",{className:l().label,children:"ID do Freelancer"}),(0,s.jsxs)("select",{name:"idFreelancer",onChange:d,className:l().input,children:[(0,s.jsx)("option",{value:"",children:"Selecione um freelancer..."}),e.filter(e=>"designer"===e.tipo.toLowerCase()).map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]}),n.idFreelancer&&(0,s.jsx)("span",{className:l().error,children:n.idFreelancer})]}),(0,s.jsxs)("div",{className:l().formGroup,children:[(0,s.jsx)("label",{className:l().label,children:"T\xedtulo"}),(0,s.jsx)("input",{type:"text",name:"title",value:c.title,onChange:d,className:l().input}),n.title&&(0,s.jsx)("span",{className:l().error,children:n.title})]}),(0,s.jsxs)("div",{className:l().formGroup,children:[(0,s.jsx)("label",{className:l().label,children:"Descri\xe7\xe3o"}),(0,s.jsx)("textarea",{name:"description",value:c.description,onChange:d,className:"".concat(l().input," ").concat(l().textarea),rows:5}),n.description&&(0,s.jsx)("span",{className:l().error,children:n.description})]}),(0,s.jsxs)("div",{className:l().formGroup,children:[(0,s.jsx)("label",{className:l().label,children:"Categoria"}),(0,s.jsxs)("select",{name:"category",value:c.category,onChange:d,className:l().input,children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),(0,s.jsx)("option",{value:"web",children:"Web"}),(0,s.jsx)("option",{value:"grafico",children:"Gr\xe1fico"}),(0,s.jsx)("option",{value:"logotipo",children:"Logotipo"}),(0,s.jsx)("option",{value:"arte digital",children:"Arte Digital"})]}),n.category&&(0,s.jsx)("span",{className:l().error,children:n.category})]}),(0,s.jsxs)("div",{className:l().formGroup,children:[(0,s.jsx)("label",{className:l().label,children:"Pre\xe7o"}),(0,s.jsx)("input",{type:"text",name:"basePrice",value:c.basePrice,onChange:d,className:l().input}),n.basePrice&&(0,s.jsx)("span",{className:l().error,children:n.basePrice})]}),(0,s.jsxs)("div",{className:l().formGroup,children:[(0,s.jsx)("label",{className:l().label,children:"Pacotes"}),(0,s.jsx)("textarea",{name:"packages",value:c.packages,onChange:d,className:"".concat(l().input," ").concat(l().textarea),rows:3,placeholder:'[{"nome":"B\xe1sico","valor":100.00}]'})]}),(0,s.jsxs)("div",{className:l().buttonGroup,children:[(0,s.jsx)("button",{type:"submit",className:"".concat(l().button," ").concat(l().secondaryButton),children:"Publicar"}),(0,s.jsx)("button",{type:"button",onClick:()=>a.push("/profile_freelancer"),className:"".concat(l().button2," ").concat(l().primaryButton),children:"Voltar"})]})]})}},3940:e=>{e.exports={form:"public__services_form__sxaHt",formGroup:"public__services_formGroup__kN3f4",label:"public__services_label__A8iG0",customFileInput:"public__services_customFileInput__L2x4V",fileInput:"public__services_fileInput__jVsvo",fileInputLabel:"public__services_fileInputLabel__PZ5K_",fileInputName:"public__services_fileInputName__0Wrcy",imagePreview:"public__services_imagePreview__5XfNZ",buttonGroup:"public__services_buttonGroup__cfO5T",button:"public__services_button__tomGB",button2:"public__services_button2__JP_L2"}},4721:(e,r,a)=>{Promise.resolve().then(a.bind(a,1409))},5695:(e,r,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}})}},e=>{var r=r=>e(e.s=r);e.O(0,[943,441,684,358],()=>r(4721)),_N_E=e.O()}]);